<div id="form-ui" [class.con-galaxia]="!mostrarVideo">
  <video autoplay muted loop playsinline id="bg-video" [style.display]="mostrarVideo ? 'block' : 'none'">
    <source src="video/fondo.mp4" type="video/mp4" />
  </video>

  <form (ngSubmit)="guardarUsuario()" id="form">
    <div id="form-body">
      <div id="welcome-lines">
        <div id="welcome-line-1">Uptify</div>
        <div id="welcome-line-2">
          {{ editando ? 'Editando usuario' : 'Crea tu cuenta' }}
        </div>
      </div>

      <div id="input-area">
        <div class="form-inp">
          <input [(ngModel)]="nuevoUsuario.name" name="name" placeholder="Nombre de usuario" type="text" required />
        </div>
        <div class="form-inp">
          <input [(ngModel)]="nuevoUsuario.email" name="email" placeholder="Correo electr√≥nico" type="email" required />
        </div>
        <div class="form-inp">
          <input [(ngModel)]="nuevoUsuario.password" name="password" placeholder="Contrase√±a" type="password" required />
        </div>
        <div class="form-inp" *ngIf="!editando">
          <input name="confirm" placeholder="Confirma tu contrase√±a" type="password" required />
        </div>
      </div>

      <div id="submit-button-cvr">
        <button (click)="mensaje()" id="submit-button" type="submit">
          {{ editando ? 'Actualizar' : 'Registrarse' }}
        </button>
      </div>
      <div id="bar"></div>
    </div>
  </form>

  @if (mostrarTabla || editando) {
  <div class="tabla-container-hero-wide">
    <div class="p-6 border-b border-white/10 text-center">
      <h3 class="text-2xl font-black tracking-widest bg-gradient-to-r from-[#4cc9f0] to-[#7209b7] bg-clip-text text-transparent uppercase">
        Lista de usuarios registrados
      </h3>
    </div>

    <div class="overflow-x-auto p-4">
      <table class="w-full text-left border-separate border-spacing-y-2">
        <thead>
          <tr class="text-[#4cc9f0] uppercase text-[10px] tracking-[3px] font-bold opacity-70">
            <th class="px-6 py-2">ID</th>
            <th class="px-6 py-2">Usuario</th>
            <th class="px-6 py-2">Correo</th>
            <th class="px-6 py-2 text-center">Acciones</th>
          </tr>
        </thead>
        <tbody class="text-white/80">
          @for (usuario of listaUsuarios(); track usuario.id) {
          <tr class="bg-white/5 hover:bg-white/10 transition-all rounded-lg group">
            <td class="px-6 py-3 font-mono text-[10px] text-[#7209b7]">{{ usuario.id }}</td>
            <td class="px-6 py-3 font-bold text-sm text-white group-hover:text-[#4cc9f0]">{{ usuario.name }}</td>
            <td class="px-6 py-3 text-sm opacity-60 text-white">{{ usuario.email }}</td>
            <td class="px-6 py-3 text-center space-x-6">
              @if (servicioAuth.rolActual()==='ADMIN') {
              <button (click)="seleccionarParaEditar(usuario)" class="hover:scale-150 transition-transform">‚úèÔ∏è</button>
              <button (click)="eliminarsuario(usuario.id!)" class="hover:scale-150 transition-transform text-red-400">üóëÔ∏è</button>
              }@else {
                <span>üîê‚Äã</span>
              }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </div>
  </div>
  }
</div>